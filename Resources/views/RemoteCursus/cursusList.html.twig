{% macro showCursus(cursus, children) %}
    {% set cursusId = cursus['id'] %}
    {% set cursusTitle = cursus['title'] %}
    
    <li>
        {{ cursusTitle }}
        
        {% if children[cursusId] is defined %}
            <ul>
                {% for child in children[cursusId] %}
                    {{ _self.showCursus(child, children) }}
                {% endfor %}
            </ul>
        {% endif %}
    </li>
{% endmacro %}

{% from _self import showCursus %}

{% extends 'ClarolineCoreBundle::layout.html.twig' %}

{% block content %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="panel-title">
                <h3>
                    {{ 'cursus_list'|trans({}, 'remoteCursus') }}
                </h3>
            </div>
        </div>
        <div class="panel-body">
            <ul>
                {% for root in roots %}
                    {{ showCursus(root, cursusChildren) }}
                {%endfor%}
            </ul>
        </div>
    </div>
{% endblock %}